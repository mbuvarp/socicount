webpackJsonp([1],{CKw0:function(t,e){},G7Ak:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("7+uW"),i=n("Dd8w"),s=n.n(i),a=n("NYxO"),c={name:"App",created:function(){this.loadConfig()},methods:s()({},Object(a.c)(["loadConfig"]))},l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var r=n("VU/8")(c,l,!1,function(t){n("eNx6")},null,null).exports,u=n("/ocq"),d={name:"Celebration",data:function(){return{celebration:null}},mounted:function(){this.$bus.$on("exit",this.close),this.$bus.$on("confirm",this.close)},destroyed:function(){this.$bus.$off("exit",this.close),this.$bus.$off("confirm",this.close)},computed:s()({},Object(a.d)({celebrate:function(t){return t.dialogs.celebrate},celebrations:function(t){return t.celebrations}})),methods:s()({close:function(){this.removeCelebrationById(this.celebration.id),this.toggleDialog("celebrate")}},Object(a.c)(["toggleDialog","removeCelebrationById"])),watch:{celebrate:function(t){t&&(this.celebration=this.celebrations[0])}}},v={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.celebrate?n("div",{staticClass:"celebration"},[n("h1",[t._v("Milepæl nådd")]),t._v(" "),n("div",{staticClass:"info"},[n("div",{staticClass:"count"},[n("span",[t._v(t._s(t.celebration.count))]),t._v(" enheter solgt")]),t._v(" "),n("div",{staticClass:"challenge"},[n("div",{staticClass:"title",domProps:{textContent:t._s(t.celebration.title)}}),t._v(" "),n("div",{staticClass:"description",domProps:{textContent:t._s(t.celebration.description)}})])]),t._v(" "),n("div",{staticClass:"finished",on:{click:t.close}},[t._v("Lukk")])]):t._e()},staticRenderFns:[]};var f=n("VU/8")(d,v,!1,function(t){n("G7Ak")},"data-v-0f4ff5e2",null).exports,h={name:"TopBar",data:function(){return{showMenu:!1,localCount:0,localMute:!1}},computed:s()({},Object(a.d)({count:function(t){return t.count},mute:function(t){return t.options.mute}})),methods:s()({isNumber:function(t){var e=(t=t||window.event).which?t.which:t.keyCode;return e>31&&(e<48||e>57)&&t.preventDefault(),!0},confirmCount:function(){this.setCount(this.localCount),this.$bus.$emit("manualCount")}},Object(a.c)(["setCount","setOptionMute"])),watch:{showMenu:function(){this.localCount=this.count,this.localMute=this.mute},count:function(t){this.localCount=t},mute:function(t){this.localMute=t},localMute:function(t){this.setOptionMute(t)}}},m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"topbar"},[n("transition",{attrs:{name:"menu-slide"}},[t.showMenu?n("div",{staticClass:"menu"},[n("ul",[n("li",{on:{click:function(e){t.showMenu=!1}}},[n("div",{staticClass:"close-menu"},[t._v("Lukk meny")])]),t._v(" "),n("li",{on:{click:function(e){t.localMute=!t.localMute}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.localMute,expression:"localMute"}],staticClass:"mute",attrs:{type:"checkbox",id:"mute-cb"},domProps:{checked:Array.isArray(t.localMute)?t._i(t.localMute,null)>-1:t.localMute},on:{change:function(e){var n=t.localMute,o=e.target,i=!!o.checked;if(Array.isArray(n)){var s=t._i(n,null);o.checked?s<0&&(t.localMute=n.concat([null])):s>-1&&(t.localMute=n.slice(0,s).concat(n.slice(s+1)))}else t.localMute=i}}}),t._v(" "),n("label",{staticClass:"mute",attrs:{for:"mute-cb"}},[t.localMute?n("span",[t._v("Lydløs")]):n("span",[t._v("Ikke lydløs")])])]),t._v(" "),n("li",[t._v("\n                    Sett antall manuelt\n                    "),n("div",[n("div",{staticClass:"set-count"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.localCount,expression:"localCount"}],attrs:{type:"text"},domProps:{value:t.localCount},on:{keypress:t.isNumber,input:function(e){e.target.composing||(t.localCount=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"set-count-confirm"},[n("button",{staticClass:"save",attrs:{type:"button"},on:{click:t.confirmCount}},[t._v("\n                                OK\n                            ")])])])]),t._v(" "),n("li",[n("router-link",{attrs:{to:{name:"Config"}}},[t._v("\n                        Konfigurer milepæler\n                    ")])],1)])]):t._e()]),t._v(" "),n("div",{staticClass:"right"},[n("div",{staticClass:"config",on:{click:function(e){t.showMenu=!0}}})])],1)},staticRenderFns:[]};var g=n("VU/8")(h,m,!1,function(t){n("qGXo")},"data-v-c6a6b4c4",null).exports,p={name:"Goals",data:function(){return{curGoalIndex:0}},mounted:function(){var t=this;this.scrollToCurrentGoal(),this.$bus.$on("manualCount",function(){t.scrollToCurrentGoal()})},destroyed:function(){this.$bus.$off("manualCount")},computed:s()({},Object(a.d)(["count"]),Object(a.b)(["sortedGoals","nextGoalId","nextGoalIndex","getGoalIdByIndex"])),methods:{scrollToCurrentGoal:function(){var t=document.getElementById("goallist");if(t.style.marginTop="0px",!(this.nextGoalIndex<4)){var e=this.nextGoalId,n=document.getElementById(e),o=n.offsetTop,i=(document.documentElement.clientHeight-n.offsetHeight)/2-o;t.style.marginTop=i+"px"}},goalReached:function(t){return this.count>=t}},watch:{nextGoalIndex:function(){this.scrollToCurrentGoal()}}},b={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"goals"},[n("ul",{staticClass:"goallist",attrs:{id:"goallist"}},t._l(t.sortedGoals,function(e){return n("li",{key:e.id,class:{reached:t.goalReached(e.count)},attrs:{id:e.id}},[n("div",[n("span",{domProps:{textContent:t._s(e.count)}})]),t._v(" "),n("h3",{domProps:{textContent:t._s(e.title)}}),t._v(" "),n("p",{domProps:{textContent:t._s(e.description)}})])}))])},staticRenderFns:[]};var C=n("VU/8")(p,b,!1,function(t){n("a9jD")},"data-v-7985ba87",null).exports,_={name:"Count",mounted:function(){this.$bus.$on("increase",this.increase),this.$bus.$on("decrease",this.decrease)},destroyed:function(){this.$bus.$off("increase",this.increase),this.$bus.$off("decrease",this.decrease)},computed:s()({},Object(a.d)({count:function(t){return t.count},goals:function(t){return t.goals}})),methods:s()({increase:function(){this.increaseProductCount(),this.checkGoal()},decrease:function(t){t&&t.preventDefault(),this.decreaseProductCount()},checkGoal:function(){var t=this,e=this.goals.filter(function(e){return e.count===t.count});e.length>0&&this.queueCelebrations(e)}},Object(a.c)(["increaseProductCount","decreaseProductCount","queueCelebrations"]))},G={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"count"},[e("div",{staticClass:"content"},[e("div",{staticClass:"header"},[this._v("Antall enheter solgt:")]),this._v(" "),e("div",{staticClass:"number",domProps:{textContent:this._s(this.count)},on:{click:this.increase,contextmenu:this.decrease}})])])},staticRenderFns:[]};var y={name:"Main",components:{Celebration:f,TopBar:g,Goals:C,Count:n("VU/8")(_,G,!1,function(t){n("RJGm")},"data-v-19c3e19e",null).exports},mounted:function(){document.addEventListener("keydown",this.keydown)},destroyed:function(){document.removeEventListener("keydown",this.keydown)},computed:s()({},Object(a.d)({celebrate:function(t){return t.celebrate},celebrations:function(t){return t.celebrations},mute:function(t){return t.options.mute}})),watch:{celebrations:function(t){if(0!==t.length){if(!this.mute)new Audio("../../static/sounds/airhorn.mp3").play();this.toggleDialog("celebrate")}}},methods:s()({keydown:function(t){switch(t.key.toLowerCase()){case"arrowleft":this.$bus.$emit("decrease");break;case"arrowright":this.$bus.$emit("increase");break;case"escape":this.$bus.$emit("exit");break;case"enter":this.$bus.$emit("confirm")}}},Object(a.c)(["toggleDialog"]))},x={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"main"},[e("celebration"),this._v(" "),e("top-bar"),this._v(" "),e("goals"),this._v(" "),e("count")],1)},staticRenderFns:[]};var k=n("VU/8")(y,x,!1,function(t){n("lGzW")},"data-v-5a8922b4",null).exports,w={name:"GoalDialog",data:function(){return{count:0,title:"",description:""}},mounted:function(){this.$bus.$on("exit",this.close)},destroyed:function(){this.$bus.$off("exit",this.close)},watch:{showDialog:function(t){var e=this;t&&setTimeout(function(){if(null!==e.editGoalId){var t=e.getGoalById(e.editGoalId);e.count=t.count,e.title=t.title,e.description=t.description}document.getElementById("count-input").select()},50)}},computed:s()({},Object(a.d)({editGoalId:function(t){return t.editGoalId},showDialog:function(t){return t.dialogs.goal}}),Object(a.b)(["getGoalById"])),methods:s()({isNumber:function(t){var e=(t=t||window.event).which?t.which:t.keyCode;return e>31&&(e<48||e>57)&&t.preventDefault(),!0},validateGoal:function(){var t=this.count>0,e=this.title.length>0&&this.title.length<=64;return t&&e},saveGoal:function(){this.validateGoal()&&(null!==this.editGoalId&&this.removeGoalById(this.editGoalId),this.addGoal({count:parseInt(this.count,10),title:this.title,description:this.description}),this.close())},close:function(){this.count=0,this.title="",this.description="",this.setEditGoalId(null),this.toggleDialog("goal")}},Object(a.c)(["addGoal","removeGoalById","toggleDialog","setEditGoalId"]))},I={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.showDialog?n("div",{staticClass:"dialog goal-dialog"},[n("div",{staticClass:"fade"}),t._v(" "),n("div",{staticClass:"body"},[n("h2",[t._v("Legg til milepæl")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.count,expression:"count"}],attrs:{type:"text",placeholder:"Antall",id:"count-input"},domProps:{value:t.count},on:{keypress:t.isNumber,input:function(e){e.target.composing||(t.count=e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text",maxlength:"64",placeholder:"Tittel"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],attrs:{placeholder:"Beskrivelse"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}}),t._v(" "),n("button",{staticClass:"save",attrs:{type:"button"},on:{click:t.saveGoal}},[t._v("Lagre")]),t._v(" "),n("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.close}})])]):t._e()},staticRenderFns:[]};var $={name:"Config",components:{GoalDialog:n("VU/8")(w,I,!1,function(t){n("CKw0")},"data-v-77a0fb7e",null).exports},computed:s()({},Object(a.b)(["sortedGoals"])),methods:s()({editGoal:function(t){this.setEditGoalId(t),this.toggleDialog("goal")},removeGoal:function(t){this.removeGoalById(t)}},Object(a.c)(["toggleDialog","removeGoalById","setEditGoalId"]))},M={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"config"},[n("goal-dialog"),t._v(" "),n("router-link",{attrs:{to:{name:"Main"}}},[n("div",{staticClass:"back"})]),t._v(" "),n("div",{staticClass:"category"},[n("h2",{staticClass:"head"},[t._v("Milepæler")]),t._v(" "),n("div",{staticClass:"body goals"},[t._m(0),t._v(" "),t._l(t.sortedGoals,function(e){return n("div",{key:e.id,staticClass:"goal"},[n("div",{staticClass:"edit",on:{click:function(n){t.editGoal(e.id)}}}),t._v(" "),n("div",{staticClass:"remove",on:{click:function(n){t.removeGoal(e.id)}}}),t._v(" "),n("div",{staticClass:"count",domProps:{textContent:t._s(e.count)}}),t._v(" "),n("div",{staticClass:"title",domProps:{textContent:t._s(e.title)}}),t._v(" "),n("div",{staticClass:"description",domProps:{textContent:t._s(e.description)}})])}),t._v(" "),n("div",{staticClass:"goal"},[n("div",{staticClass:"add"},[n("button",{attrs:{type:"button"},on:{click:function(e){t.toggleDialog("goal")}}},[t._v("Legg til milepæl")])])])],2)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"goal headers"},[e("div",{staticClass:"empty"}),this._v(" "),e("div",{staticClass:"empty"}),this._v(" "),e("div",{staticClass:"count"},[this._v("Antall")]),this._v(" "),e("div",{staticClass:"title"},[this._v("Tittel")]),this._v(" "),e("div",{staticClass:"description"},[this._v("Beskrivelse")])])}]};var O=n("VU/8")($,M,!1,function(t){n("QRn+")},"data-v-17388b51",null).exports;o.a.use(u.a);var D=new u.a({mode:"history",routes:[{path:"/",name:"Main",component:k},{path:"/config",name:"Config",component:O}]}),P=n("mvHQ"),B=n.n(P);function E(t,e){var n=B()(e);localStorage.setItem(t,n)}function j(t){var e=localStorage.getItem(t);return JSON.parse(e)}o.a.use(a.a);var N=new a.a.Store({state:{count:0,goals:[],celebrations:[],editGoalId:null,dialogs:{goal:!1,celebrate:!1},options:{mute:!1}},mutations:{increaseProductCount:function(t){++t.count,E("count",t.count)},decreaseProductCount:function(t){--t.count,E("count",t.count)},setCount:function(t,e){t.count=e,E("count",t.count)},addGoal:function(t,e){var n=s()({id:function(){for(var t="",e=0;e<32;e++)t+=String.fromCharCode(97+Math.floor(Math.random()*Math.floor(26)));return t}()},e);t.goals.push(n),E("goals",t.goals)},setEditGoalId:function(t,e){t.editGoalId=e},removeGoalById:function(t,e){t.goals=t.goals.filter(function(t){return t.id!==e}),E("goals",t.goals)},queueCelebrations:function(t,e){t.celebrations=t.celebrations.concat(e)},removeCelebrationById:function(t,e){t.celebrations=t.celebrations.filter(function(t){return t.id!==e})},toggleDialog:function(t,e){switch(e){case"goal":t.dialogs.goal=!t.dialogs.goal;break;case"celebrate":t.dialogs.celebrate=!t.dialogs.celebrate}},loadConfig:function(t){t.count=j("count")||0,t.goals=j("goals")||[]},setOptionMute:function(t,e){t.options.mute=e}},getters:{sortedGoals:function(t){return t.goals.sort(function(t,e){return t.count-e.count})},getGoalById:function(t){return function(e){return t.goals.find(function(t){return t.id===e})}},getGoalIdByIndex:function(t,e){return function(t){return e.sortedGoals[t].id}},nextGoalId:function(t,e){for(var n=e.sortedGoals,o=0;n[o].count<=t.count;)if((o+=1)>n.length-1)return null;return n[o].id},nextGoalIndex:function(t,e){var n=e.nextGoalId;return e.sortedGoals.findIndex(function(t){return t.id===n})}}}),R={install:function(t){var e=new o.a;t.prototype.$bus=e}};o.a.config.productionTip=!1,o.a.use(R),new o.a({el:"#app",router:D,store:N,components:{App:r},template:"<App/>"})},"QRn+":function(t,e){},RJGm:function(t,e){},a9jD:function(t,e){},eNx6:function(t,e){},lGzW:function(t,e){},qGXo:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.e7b86cbe38771f259512.js.map